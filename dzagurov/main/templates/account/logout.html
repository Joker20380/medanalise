{% extends "dzagurov/base.html" %}
{% load static %}
{% load i18n %}
{% load allauth account %}

{% block title %}{% trans "Sign Out" %}{% endblock %}

{% block content %}
{% if request.GET.modal == "1" %}
  <div id="auth-modal-inner" class="auth-glass auth-glass--logout">

    <div class="auth-glass-head">
      <div class="auth-glass-title">Выйти</div>
      <div class="auth-glass-sub">Подтверди выход из аккаунта</div>
    </div>

    <form data-auth-modal-form="1" action="{% url 'account_logout' %}" method="post" novalidate>
      {% csrf_token %}

      {% if redirect_field_value %}
        <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
      {% endif %}

      <button type="submit" class="btn btn-primary btn-block mt-2">Выйти</button>

      {# ВАЖНО: для Bootstrap 4 нужен data-dismiss="modal" #}
      <button type="button"
              class="btn btn-outline-secondary btn-block mt-2"
              data-dismiss="modal">Отмена</button>
    </form>

    <style>
      /* ===== Modal glass polish (scoped) ===== */
      #auth-modal-inner.auth-glass{
        padding: 16px;
        border-radius: 16px;
        background: linear-gradient(180deg, rgba(17,108,179,.18), rgba(255,255,255,.10));
        border: 1px solid rgba(255,255,255,.22);
        backdrop-filter: blur(18px) saturate(155%);
        -webkit-backdrop-filter: blur(18px) saturate(155%);
        box-shadow: 0 18px 60px rgba(0,0,0,.18);
        color: rgba(20,24,32,.92);
      }

      #auth-modal-inner .auth-glass-head{ margin-bottom: 12px; }
      #auth-modal-inner .auth-glass-title{
        font-weight: 700; font-size: 18px; line-height: 1.2; color: rgba(20,24,32,.92);
      }
      #auth-modal-inner .auth-glass-sub{
        margin-top: 6px; font-size: 13px; color: rgba(20,24,32,.70);
      }

      /* Кнопки в бренде */
      #auth-modal-inner .btn-primary{
        background: #116cb3 !important;
        border: 0 !important;
        border-radius: 14px !important;
        font-weight: 700;
        height: 42px;
      }
      #auth-modal-inner .btn-primary:hover{
        background: #0f5fa0 !important;
      }

      #auth-modal-inner .btn-outline-secondary{
        border-radius: 14px !important;
        height: 42px;
        font-weight: 650;
      }
    </style>

  </div>
{% else %}

  <section class="ftco-intro img" style="background-image: url({% static 'images/contacts.webp' %});">
    <div class="overlay"></div>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-9 text-center">
          <h2>Выйти</h2>
          <p>Вы уверены что хотите выйти?</p>
        </div>
      </div>
    </div>
  </section>

  <section class="login_box_area section-margin auth-page">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="card shadow-sm border-0">
            <div class="card-body p-4">
              <p class="mb-3">{% trans "Are you sure you want to sign out?" %}</p>

              <form action="{% url 'account_logout' %}" method="post" novalidate>
                {% csrf_token %}
                {% if redirect_field_value %}
                  <input type="hidden" name="{{ redirect_field_name }}" value="{{ redirect_field_value }}">
                {% endif %}

                <button type="submit" class="btn btn-primary">Выйти</button>
                <a href="{% url 'index' %}" class="btn btn-outline-secondary ml-2">Отмена</a>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <style>
      /* Если глобальные стили где-то ломают контролы — подстраховка */
      .auth-page .btn{ border-radius: 14px; }
    </style>
  </section>

{% endif %}
{% endblock %}

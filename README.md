üß¨ Dzagurov KDL ‚Äî Medical Web Platform

–í–µ–±-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ ¬´–î–∑–∞–≥—É—Ä–æ–≤ –ö–î–õ¬ª, –≤–∫–ª—é—á–∞—é—â–∞—è –ø—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç, –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç, –æ–Ω–ª–∞–π–Ω-—á–∞—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å VK –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—Ä–∞—â–µ–Ω–∏–π –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤.

üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

üåê –ü—É–±–ª–∏—á–Ω—ã–π —Å–∞–π—Ç –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏

üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã

üí¨ –û–Ω–ª–∞–π–Ω-—á–∞—Ç —Å –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º

üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VK (Callback API)

üß† –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

üì± –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π glass-UI —á–∞—Ç

‚öôÔ∏è –ì–æ—Ç–æ–≤–æ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é (long-poll / WebSocket)

üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ Django —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

dzagurov/
‚îú‚îÄ‚îÄ main/        # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ chat/        # –û–Ω–ª–∞–π–Ω-—á–∞—Ç + VK
‚îú‚îÄ‚îÄ accounts/    # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ static/      # CSS / JS / images
‚îú‚îÄ‚îÄ templates/   # HTML-—à–∞–±–ª–æ–Ω—ã
‚îî‚îÄ‚îÄ dzagurov/    # settings, urls, wsgi

üß∞ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
Backend

üêç Python 3.10

üéØ Django 5.x

üêò PostgreSQL (production)

üî´ Gunicorn

üåê Nginx

Frontend

HTML5 / CSS3

Bootstrap

Vanilla JavaScript

Fetch API (AJAX)

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

üí¨ VK API (Callback API)

üîê CSRF protection

üåç Session-based auth

üí¨ –û–Ω–ª–∞–π–Ω-—á–∞—Ç

–û–Ω–ª–∞–π–Ω-—á–∞—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ floating-–≤–∏–¥–∂–µ—Ç:

–ö–Ω–æ–ø–∫–∞ FAB

–°—Ç–µ–∫–ª—è–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (Glass UI)

–†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ React / Vue

–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–∞—Å—Ç–æ–º–Ω—ã–π JS

üìÇ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:

static/js/chat_widget.js

static/css/custom_style.css

üóÇ –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —á–∞—Ç–∞
ChatThread

–û–¥–∏–Ω –¥–∏–∞–ª–æ–≥ = –æ–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

–°–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

–ú–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω —Å VK

ChatMessage

–°–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞

–¢–∏–ø—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:

visitor

operator

system

–ü–æ–¥–¥–µ—Ä–∂–∫–∞ vk_message_id (idempotency)

üîÅ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π (VK)

VK –º–æ–∂–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–±—ã—Ç–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑.
–†–µ—à–µ–Ω–∏–µ:

vk_message_id ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ

–ü–æ–≤—Ç–æ—Ä–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

VK –≤—Å–µ–≥–¥–∞ –ø–æ–ª—É—á–∞–µ—Ç ok

üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å VK

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è VK Callback API.

Endpoint
/chat/vk/callback/

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è

confirmation

message_new

üéØ –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ VK

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∫ –¥–∏–∞–ª–æ–≥–∞–º:

#50 –ü—Ä–∏–≤–µ—Ç


‚û° –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ø–∞–¥—ë—Ç —Ç–æ–ª—å–∫–æ –≤ –¥–∏–∞–ª–æ–≥ —Å ID 50.

–ï—Å–ª–∏ ID –Ω–µ —É–∫–∞–∑–∞–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–∏–π –¥–∏–∞–ª–æ–≥.

‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è VK

–í settings.py:

VK_CALLBACK_CONFIRMATION

VK_GROUP_TOKEN

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

Polling (–æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–∞)

–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

‚è≥ Long-poll

‚ö° –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ CPU

üîå WebSocket (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

üîÑ Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø—Ä–æ—Ü–µ—Å—Å:

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ (PyCharm)

Commit & push –≤ GitHub

Deploy –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

git pull
python manage.py migrate
sudo systemctl restart gunicorn

üß™ –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

–°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä

üìå –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

üü¢ Production ready
–ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è.
–ß–∞—Ç –∏ VK-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ.

üë§ –ê–≤—Ç–æ—Ä

White_cat
–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–†–æ—Å—Å–∏—è üá∑üá∫
